# âš¡ å»ä¸­å¿ƒåŒ–ç”µåŠ›æ•°æ®å¹³å° (Decentralized Power Platform)

ä¸€ä¸ªåŸºäºåŒºå—é“¾çš„å»ä¸­å¿ƒåŒ–ç”µåŠ›è®¾å¤‡ç®¡ç†ä¸èƒ½æºäº¤æ˜“å¹³å°ï¼Œé›†æˆäº† Chainlink é¢„è¨€æœºã€The Graph æ•°æ®ç´¢å¼•å’Œ IPFS åˆ†å¸ƒå¼å­˜å‚¨ã€‚

![Version](https://img.shields.io/badge/version-1.0.0-blue.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)
![Solidity](https://img.shields.io/badge/solidity-0.8.19-orange.svg)

---

## ğŸŒŸ æ ¸å¿ƒåŠŸèƒ½

### 1ï¸âƒ£ è®¾å¤‡ç®¡ç†ä¸æ•°æ®ä¸ŠæŠ¥
- âœ… è®¾å¤‡æ³¨å†Œä¸æ‰€æœ‰æƒç®¡ç†
- âœ… å®æ—¶æ•°æ®ä¸ŠæŠ¥ï¼ˆåŠŸç‡ã€æ¸©åº¦ã€GPSç­‰ï¼‰
- âœ… æ•°æ®åŠ å¯†å­˜å‚¨ï¼ˆAES-256-GCM + RSA-2048ï¼‰
- âœ… IPFS åˆ†å¸ƒå¼å­˜å‚¨
- âœ… åŒºå—é“¾æ•°æ®å®Œæ•´æ€§éªŒè¯

### 2ï¸âƒ£ P2P èƒ½æºäº¤æ˜“å¸‚åœº
- âœ… èƒ½æºä¸Šæ¶ä¸å®šä»·
- âœ… å®æ—¶ç”µä»·æŸ¥è¯¢ï¼ˆChainlink é¢„è¨€æœºï¼‰
- âœ… ç‚¹å¯¹ç‚¹äº¤æ˜“
- âœ… æ™ºèƒ½åˆçº¦è‡ªåŠ¨ç»“ç®—
- âœ… å¹³å°æ‰‹ç»­è´¹ç®¡ç†

### 3ï¸âƒ£ é¢„æµ‹æ€§ç»´æŠ¤æœåŠ¡
- âœ… è®¾å¤‡å¥åº·åº¦è¯„åˆ†
- âœ… ç»´æŠ¤è®°å½•ç®¡ç†
- âœ… é¢„æµ‹æ€§åˆ†æ
- âœ… ç»´ä¿®äººå‘˜æƒé™ç®¡ç†
- âœ… åŠ å¯†æ•°æ®è§£å¯†è®¿é—®

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       å‰ç«¯åº”ç”¨ (React)                        â”‚
â”‚  â€¢ MetaMask é’±åŒ…é›†æˆ   â€¢ è§’è‰²æƒé™ç³»ç»Ÿ   â€¢ å¤šè¯­è¨€æ”¯æŒ         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ™ºèƒ½åˆçº¦å±‚     â”‚  â”‚  é¢„è¨€æœºæœåŠ¡      â”‚  â”‚  æ•°æ®ç´¢å¼•æœåŠ¡   â”‚
â”‚ â€¢ DeviceReg    â”‚  â”‚  â€¢ Chainlink     â”‚  â”‚  â€¢ The Graph    â”‚
â”‚ â€¢ Marketplace  â”‚  â”‚  â€¢ Price Feeds   â”‚  â”‚  â€¢ GraphQL      â”‚
â”‚ â€¢ Maintenance  â”‚  â”‚  â€¢ VRF           â”‚  â”‚  â€¢ Subgraph     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åŒºå—é“¾ç½‘ç»œ                                 â”‚
â”‚  â€¢ Ethereum  â€¢ Polygon  â€¢ Arbitrum  â€¢ Optimism               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  åˆ†å¸ƒå¼å­˜å‚¨ (IPFS)                            â”‚
â”‚  â€¢ Pinata  â€¢ Web3.Storage  â€¢ NFT.Storage                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js >= 16.x
- MetaMask æµè§ˆå™¨æ‰©å±•
- æµ‹è¯•ç½‘ ETHï¼ˆSepolia/Mumbaiï¼‰

### 5åˆ†é’Ÿå¿«é€Ÿéƒ¨ç½²

```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.production.example .env.production
# ç¼–è¾‘ .env.production å¡«å†™å¿…è¦çš„å¯†é’¥

# 3. éƒ¨ç½²æ™ºèƒ½åˆçº¦
npm run compile
npm run deploy:sepolia

# 4. è‡ªåŠ¨æ›´æ–°é…ç½®
node scripts/update-config.js sepolia

# 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

ğŸ¯ **è¯¦ç»†éƒ¨ç½²æŒ‡å—**: [QUICK_START.md](./QUICK_START.md)

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ contracts/                    # æ™ºèƒ½åˆçº¦
â”‚   â”œâ”€â”€ DeviceRegistry.sol       # è®¾å¤‡æ³¨å†Œåˆçº¦
â”‚   â”œâ”€â”€ EnergyMarketplace.sol    # èƒ½æºå¸‚åœºåˆçº¦
â”‚   â””â”€â”€ MaintenanceService.sol   # ç»´æŠ¤æœåŠ¡åˆçº¦
â”‚
â”œâ”€â”€ components/                   # React ç»„ä»¶
â”‚   â”œâ”€â”€ DeviceManagement.tsx     # è®¾å¤‡ç®¡ç†
â”‚   â”œâ”€â”€ EnergyMarket.tsx         # èƒ½æºå¸‚åœº
â”‚   â”œâ”€â”€ MaintenanceService.tsx   # ç»´æŠ¤æœåŠ¡
â”‚   â””â”€â”€ WalletConnect.tsx        # é’±åŒ…è¿æ¥
â”‚
â”œâ”€â”€ config/                       # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ constants.ts             # åº”ç”¨å¸¸é‡
â”‚   â””â”€â”€ production.config.ts     # ç”Ÿäº§é…ç½®
â”‚
â”œâ”€â”€ contexts/                     # React Context
â”‚   â”œâ”€â”€ LanguageContext.tsx      # è¯­è¨€ä¸Šä¸‹æ–‡
â”‚   â””â”€â”€ RoleContext.tsx          # è§’è‰²ä¸Šä¸‹æ–‡
â”‚
â”œâ”€â”€ scripts/                      # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ deploy.js                # åˆçº¦éƒ¨ç½²
â”‚   â””â”€â”€ update-config.js         # é…ç½®æ›´æ–°
â”‚
â”œâ”€â”€ .env.production.example       # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ hardhat.config.js            # Hardhat é…ç½®
â”œâ”€â”€ DEPLOYMENT_GUIDE.md          # å®Œæ•´éƒ¨ç½²æŒ‡å—
â””â”€â”€ QUICK_START.md               # å¿«é€Ÿå¼€å§‹æŒ‡å—
```

---

## ğŸ”§ å¯ç”¨å‘½ä»¤

### å¼€å‘å‘½ä»¤
```bash
npm run dev           # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run build         # æ„å»ºå¼€å‘ç‰ˆæœ¬
npm run build:prod    # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run preview       # é¢„è§ˆæ„å»ºäº§ç‰©
```

### æ™ºèƒ½åˆçº¦å‘½ä»¤
```bash
npm run compile               # ç¼–è¯‘åˆçº¦
npm run deploy:sepolia        # éƒ¨ç½²åˆ° Sepolia
npm run deploy:mumbai         # éƒ¨ç½²åˆ° Mumbai
npm run deploy:polygon        # éƒ¨ç½²åˆ° Polygon
npm run verify:sepolia ADDR   # éªŒè¯åˆçº¦
npm run node                  # å¯åŠ¨æœ¬åœ°èŠ‚ç‚¹
npm run test                  # è¿è¡Œæµ‹è¯•
```

### å·¥å…·å‘½ä»¤
```bash
npm run clean         # æ¸…ç†ç¼“å­˜
npm run coverage      # æµ‹è¯•è¦†ç›–ç‡
npm run gas-report    # Gas ä½¿ç”¨æŠ¥å‘Š
```

---

## ğŸ” å®‰å…¨ç‰¹æ€§

### æ•°æ®åŠ å¯†
- **æ•æ„Ÿæ•°æ®**: AES-256-GCM å¯¹ç§°åŠ å¯†
- **å¯†é’¥ç®¡ç†**: RSA-2048 å…¬é’¥åŠ å¯†
- **è®¿é—®æ§åˆ¶**: åŸºäºè§’è‰²çš„æƒé™ç³»ç»Ÿ

### æ•°æ®å®Œæ•´æ€§
- **å“ˆå¸ŒéªŒè¯**: SHA-256 æ•°æ®æŒ‡çº¹
- **åŒºå—é“¾å­˜è¯**: ä¸å¯ç¯¡æ”¹çš„æ•°æ®å“ˆå¸Œ
- **IPFS å­˜å‚¨**: å†…å®¹å¯»å€çš„åˆ†å¸ƒå¼å­˜å‚¨

### è§’è‰²æƒé™
| è§’è‰² | è®¾å¤‡ç®¡ç† | èƒ½æºäº¤æ˜“ | ç»´æŠ¤æœåŠ¡ |
|-----|---------|---------|---------|
| **è®¾å¤‡æ‰€æœ‰è€…** | âœ… å®Œå…¨è®¿é—® | âœ… å®Œå…¨è®¿é—® | âœ… å®Œå…¨è®¿é—® |
| **ç»´ä¿®äººå‘˜** | âŒ æ— æƒé™ | âŒ æ— æƒé™ | âœ… è§£å¯†è®¿é—® |

---

## ğŸŒ æ”¯æŒçš„ç½‘ç»œ

### æµ‹è¯•ç½‘ï¼ˆæ¨èç”¨äºå¼€å‘ï¼‰
- âœ… **Sepolia** (Ethereum)
- âœ… **Mumbai** (Polygon)
- âœ… **Goerli** (Ethereum, å³å°†å¼ƒç”¨)

### ä¸»ç½‘
- âœ… **Ethereum Mainnet**
- âœ… **Polygon Mainnet**
- âœ… **Arbitrum One**
- âœ… **Optimism**

---

## ğŸ“Š æ™ºèƒ½åˆçº¦

### DeviceRegistry
ç®¡ç†è®¾å¤‡æ³¨å†Œã€æ‰€æœ‰æƒå’Œæ•°æ®å“ˆå¸Œã€‚

**ä¸»è¦åŠŸèƒ½:**
- `registerDevice()` - æ³¨å†Œæ–°è®¾å¤‡
- `updateDeviceData()` - æ›´æ–°è®¾å¤‡æ•°æ®
- `transferDevice()` - è½¬ç§»è®¾å¤‡æ‰€æœ‰æƒ
- `verifyDataIntegrity()` - éªŒè¯æ•°æ®å®Œæ•´æ€§

### EnergyMarketplace
P2P èƒ½æºäº¤æ˜“å¸‚åœºã€‚

**ä¸»è¦åŠŸèƒ½:**
- `listEnergy()` - ä¸Šæ¶èƒ½æº
- `purchaseEnergy()` - è´­ä¹°èƒ½æº
- `cancelListing()` - å–æ¶ˆä¸Šæ¶
- `getActiveListings()` - è·å–æ´»è·ƒä¸Šæ¶

### MaintenanceService
è®¾å¤‡ç»´æŠ¤è®°å½•å’Œé¢„æµ‹æ€§åˆ†æã€‚

**ä¸»è¦åŠŸèƒ½:**
- `recordMaintenance()` - è®°å½•ç»´æŠ¤
- `updateHealthScore()` - æ›´æ–°å¥åº·è¯„åˆ†
- `predictMaintenance()` - é¢„æµ‹æ€§åˆ†æ
- `getDeviceHealth()` - è·å–è®¾å¤‡å¥åº·çŠ¶æ€

---

## ğŸ”— å¤–éƒ¨é›†æˆ

### Chainlink é¢„è¨€æœº
- **Price Feeds**: è·å–å®æ—¶ç”µä»·æ•°æ®
- **VRF**: å¯éªŒè¯éšæœºæ•°ï¼ˆå¯é€‰ï¼‰
- **Automation**: è‡ªåŠ¨åŒ–ä»»åŠ¡æ‰§è¡Œï¼ˆå¯é€‰ï¼‰

### The Graph
- **æ•°æ®ç´¢å¼•**: é«˜æ•ˆæŸ¥è¯¢åŒºå—é“¾æ•°æ®
- **GraphQL API**: çµæ´»çš„æ•°æ®æŸ¥è¯¢
- **å®æ—¶è®¢é˜…**: WebSocket å®æ—¶æ›´æ–°

### IPFS
- **Pinata**: ä¼ä¸šçº§ IPFS æœåŠ¡
- **Web3.Storage**: å…è´¹çš„ IPFS å­˜å‚¨
- **NFT.Storage**: NFT ä¸“ç”¨å­˜å‚¨

---

## ğŸ› ï¸ ç¯å¢ƒå˜é‡

### å¿…é¡»é…ç½®ï¼ˆéƒ¨ç½²ï¼‰
```bash
DEPLOYER_PRIVATE_KEY=           # éƒ¨ç½²è€…ç§é’¥ âš ï¸
VITE_INFURA_KEY=                # Infura API Key
ETHERSCAN_API_KEY=              # Etherscan API Key
```

### å¿…é¡»é…ç½®ï¼ˆåº”ç”¨ï¼‰
```bash
VITE_PINATA_API_KEY=            # Pinata API Key
VITE_PINATA_SECRET_KEY=         # Pinata Secret
VITE_PINATA_JWT=                # Pinata JWT
VITE_CONTRACT_DEVICE_REGISTRY=  # è®¾å¤‡æ³¨å†Œåˆçº¦åœ°å€
VITE_CONTRACT_ENERGY_MARKETPLACE= # èƒ½æºå¸‚åœºåˆçº¦åœ°å€
VITE_CONTRACT_MAINTENANCE_SERVICE= # ç»´æŠ¤æœåŠ¡åˆçº¦åœ°å€
```

### å¯é€‰é…ç½®
```bash
VITE_GRAPH_URL=                 # The Graph Subgraph URL
VITE_GOOGLE_MAPS_KEY=           # Google Maps API Key
VITE_AMAP_KEY=                  # é«˜å¾·åœ°å›¾ API Key
```

---

## ğŸ“– æ–‡æ¡£

- ğŸ“š [å®Œæ•´éƒ¨ç½²æŒ‡å—](./DEPLOYMENT_GUIDE.md) - è¯¦ç»†çš„éƒ¨ç½²æ­¥éª¤å’Œé…ç½®
- ğŸš€ [å¿«é€Ÿå¼€å§‹](./QUICK_START.md) - 5åˆ†é’Ÿå¿«é€Ÿéƒ¨ç½²
- ğŸ”§ [Hardhat é…ç½®](./hardhat.config.js) - æ™ºèƒ½åˆçº¦é…ç½®
- âš™ï¸ [ç”Ÿäº§é…ç½®](./config/production.config.ts) - ç”Ÿäº§ç¯å¢ƒé…ç½®

---

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test

# æµ‹è¯•è¦†ç›–ç‡
npm run coverage

# Gas ä½¿ç”¨æŠ¥å‘Š
npm run gas-report
```

---

## ğŸ“ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](./LICENSE) æ–‡ä»¶

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

---

## ğŸ’¬ æ”¯æŒ

- ğŸ“§ Email: support@depowergrid.com
- ğŸ’¬ Discord: https://discord.gg/depowergrid
- ğŸ¦ Twitter: @DePowerGrid
- ğŸ“– æ–‡æ¡£: https://docs.depowergrid.com

---

## ğŸ™ é¸£è°¢

- [Hardhat](https://hardhat.org/) - æ™ºèƒ½åˆçº¦å¼€å‘æ¡†æ¶
- [Chainlink](https://chain.link/) - å»ä¸­å¿ƒåŒ–é¢„è¨€æœº
- [The Graph](https://thegraph.com/) - åŒºå—é“¾æ•°æ®ç´¢å¼•
- [Pinata](https://pinata.cloud/) - IPFS æœåŠ¡
- [OpenZeppelin](https://openzeppelin.com/) - å®‰å…¨çš„æ™ºèƒ½åˆçº¦åº“
- [MetaMask](https://metamask.io/) - Web3 é’±åŒ…

---

## ğŸ—ºï¸ è·¯çº¿å›¾

- [x] æ™ºèƒ½åˆçº¦å¼€å‘
- [x] å‰ç«¯åº”ç”¨å¼€å‘
- [x] MetaMask é›†æˆ
- [x] IPFS é›†æˆ
- [ ] The Graph Subgraph éƒ¨ç½²
- [ ] Chainlink é¢„è¨€æœºé›†æˆ
- [ ] ç§»åŠ¨ç«¯é€‚é…
- [ ] å¤šé“¾éƒ¨ç½²
- [ ] NFT è®¾å¤‡å‡­è¯
- [ ] DAO æ²»ç†

---

**âš¡ ç”± DePowerGrid å›¢é˜Ÿç”¨ â¤ï¸ æ‰“é€ **
